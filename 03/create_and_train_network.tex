\begin{alltt}
\textcolor{linenr}{001  }\textcolor{keyword}{function} [ network, performance ] = create\_and\_train\_network( x\_min, x\_max, \textcolor{keyword}{\underline{...}}
\textcolor{linenr}{002  }    neuron\_count, performance\_function, epoch\_count, \textcolor{keyword}{\underline{...}}
\textcolor{linenr}{003  }    x\_train, y\_train, x\_test, y\_test, alpha)
\textcolor{linenr}{004  }
\textcolor{linenr}{005  }    network = newff([x\_min x\_max], [neuron\_count, 1], \{\textcolor{string}{'logsig'}, \textcolor{string}{'purelin'}\}, \textcolor{string}{'trainscg'});
\textcolor{linenr}{006  }    network.performFcn = performance\_function;
\textcolor{linenr}{007  }    network.trainParam.epochs = epoch\_count;
\textcolor{linenr}{008  }    network.trainParam.show = epoch\_count;
\textcolor{linenr}{009  }
\textcolor{linenr}{010  }    \textcolor{keyword}{if} exist(\textcolor{string}{'alpha'}, \textcolor{string}{'var'}) 
\textcolor{linenr}{011  }        network.performParam.ratio = alpha;
\textcolor{linenr}{012  }    \textcolor{keyword}{end}
\textcolor{linenr}{013  }
\textcolor{linenr}{014  }    network = init(network);
\textcolor{linenr}{015  }    plotbrowser;
\textcolor{linenr}{016  }    \textcolor{comment}{% train the network with the done config}
\textcolor{linenr}{017  }
\textcolor{linenr}{018  }    x\_train2 = [x\_train, x\_test];
\textcolor{linenr}{019  }    t\_train2 = [y\_train, y\_test];
\textcolor{linenr}{020  }
\textcolor{linenr}{021  }    network.divideFcn = \textcolor{string}{'divideind'};
\textcolor{linenr}{022  }    network.divideParam.trainInd = 1:size(x\_train,2);
\textcolor{linenr}{023  }    network.divideParam.valInd = [];
\textcolor{linenr}{024  }    network.divideParam.testInd = (1+size(x\_train,2)):size(x\_train2,2);
\textcolor{linenr}{025  }    
\textcolor{linenr}{026  }    [network, performance] = train(network, x\_train2, t\_train2);
\textcolor{linenr}{027  }\textcolor{keyword}{end}
\textcolor{linenr}{028  }
\end{alltt}
